<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios con Vectores Numericos</title>
    <style>
        table td {
            text-align: center;
        }

    </style>
</head>

<body>
    <h4>Ejercicio con Vectores</h4>
    <p></p>
    <table id="id-table-vector-numerico" border="1" cellspacing="1" cellpadding="1">
        <thead>
            <tr>
                <td colspan="10">Vector numerico de 10 elementos</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
            <tr>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5"><button id="btn-cargar-vector">Cargar Vector</button></td>
                <td colspan="5"><button id="btn-vaciar-vector">Vaciar Vector</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-suma-vector">Suma de Valores</button></td>
                <td colspan="5"><button id="btn-producto-vector">Producto de Valores</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-calcular-moda">Calcular Moda</button></td>
                <td colspan="5"><button id="btn-calcular-media">Calcular Media</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-calcular-mediana">Calcular Mediana</button></td>
                <td colspan="5"><button id="btn-calcular-otro">...</button></td>
            </tr>
        </tfoot>
    </table>
    <hr>
    <table>
        <thead>
            <tr>
                <td colspan="2">Calculos con vectores </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Resultado:</td>
                <td colspan="2"><input type="text" id="id-txt-respuesta" readonly></td>
            </tr>
        </tbody>
    </table>

    <script>
        let vector = []
        const TOPE = 10
        const NUM_MAXIMO_RANDOM = 20

        const tableTbody = document.querySelector('#id-table-vector-numerico > tbody')
        const btnCargarVector = document.getElementById("btn-cargar-vector")
        const btnVaciarVector = document.getElementById("btn-vaciar-vector")
        const result = document.getElementById('id-txt-respuesta')
        const btnSumaVector = document.getElementById("btn-suma-vector")
        const btnProductoVector = document.getElementById("btn-producto-vector")
        const btnCalculaModa = document.getElementById("btn-calcular-moda")
        const btnCalculaMedia = document.getElementById("btn-calcular-media")
        const btnCalculaMediana = document.getElementById("btn-calcular-mediana")

        fnPresentarVector()

        btnCargarVector.addEventListener('click', (event) => {
            event.preventDefault()
            fnCargarVector()
            fnPresentarVector()
        })

        btnVaciarVector.addEventListener('click', (event) => {
            event.preventDefault()
            fnVaciarVector()
            fnPresentarVector()
        })

        btnSumaVector.addEventListener('click', (event) => {
            event.preventDefault()
            result.value = fnSumaVector()
        })

        btnProductoVector.addEventListener('click', (event) => {
            event.preventDefault()
            result.value = fnProductoVector()
        })

        btnCalculaModa.addEventListener('click', (event) => {
            event.preventDefault()
            let vectorOrdenado = fnOrdenaVector()
            result.value = fnCalculaModa(vectorOrdenado)
        })

        btnCalculaMedia.addEventListener('click', (event) => {
            event.preventDefault()
            let sumaVector = fnSumaVector()
            result.value = fnCalculaMedia(sumaVector)
        })

        btnCalculaMediana.addEventListener('click', (event) => {
            event.preventDefault()
            let vectorOrdenado = fnOrdenaVector()
            result.value = fnCalculaMediana(vectorOrdenado)
        })

        function fnCargarVector() {
            for (let x = 0; x < TOPE; x++) {
                const numero = Math.ceil(Math.random() * NUM_MAXIMO_RANDOM);
                vector[x] = numero
            }
            result.value = ''
        }

        function fnVaciarVector() {
            vector = []
        }

        function fnSumaVector() {
            let suma = 0
            for (let i = 0; i<= 9; i++) {
                suma += vector[i]
            }
            return suma
        }

        function fnProductoVector() {
            let produc = 1
            for (let i = 0; i<= 9; i++) {
                produc *= vector[i]
            }
            return produc
        }

        function fnOrdenaVector() {
            let vectorOrden = vector
            vectorOrden.sort( (a, b) => {
                if (a==b) {
                    return 0
                }
                if (a<b) {
                    return -1
                }
                return 1
            })
            return vectorOrden
        }

        function fnCalculaModa(vOrdenado) {
            let moda = 0
            let vectorRepite = []
            let vectorValorRepite = []
            let valAnterior = vOrdenado[0]
            let valActual = vOrdenado[0]
            let repeticiones = 1
            let c = 0
            for (let i=1; i<=9; i++) {
                valActual = vOrdenado[i]
                if (valActual == valAnterior) {
                    repeticiones++
                    if (i==9) {
                        vectorRepite[c] = repeticiones
                        vectorValorRepite[c] = valActual
                    }
                } else {
                    if (repeticiones > 1) {
                        vectorRepite[c] = repeticiones
                        vectorValorRepite[c] = valAnterior
                        repeticiones = 1
                        c++
                    }
                }
                valAnterior = valActual
            }
            let maxVectorRepite = Math.max(...vectorRepite)
            for (let p=vectorRepite.length-1; p>=0; p--) {
                if (vectorRepite[p] === maxVectorRepite) {
                    moda = vectorValorRepite[p]
                    break
                }
            }
            if (moda == 0) {
                moda = "La moda no existe"
            }
            return moda
        }

        function fnCalculaMedia(suma) {
            let media = 0
            media = suma / vector.length
            return media
        }            

        function fnCalculaMediana(vOrdenado) {
            let mediana = 0
            if (vector.length % 2 == 0) {
                let p = vector.length / 2
                mediana = (vOrdenado[p - 1] + vOrdenado[p]) / 2
            } else {
                let p = vector.length / 2
                mediana = vOrdenado[p]
            }
            return mediana
        }
        
        function fnPresentarVector() {
            let contador = 0
            let str = ''
            while (contador < 2) {
                str = str + `<tr>`
                for (let x = 0; x < TOPE; x++) {
                    if (contador === 0) {
                        str = str + `<td>${x}</td>`
                    } else {
                        str = str + `<td bgcolor="#00FF00">${vector[x] || '&nbsp'}</td>`
                    }
                }
                str = str + `</tr>`
                contador++
            }
            tableTbody.innerHTML = str
        }

    </script>
</body>

</html>
