<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios con Vectores Numericos</title>
    <style>
        table td {
            text-align: center;
        }
    </style>
</head>

<body>
    <h4>Ejercicio con Vectores</h4>
    <div>
        Dimension del arreglo:
        <select id="select-dimension-arreglo">
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
        </select>
    </div>
    <br>
    <table id="id-table-vector-numerico" border="1" cellspacing="1" cellpadding="1">
        <thead>
            <tr>
                <td colspan="10">Vector numerico de N elementos</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
            <tr>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5"><button id="btn-cargar-vector">Cargar Vector</button></td>
                <td colspan="5"><button id="btn-vaciar-vector">Vaciar Vector</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-valor-minimo">Valor Minimo</button></td>
                <td colspan="5"><button id="btn-valor-maximo">Valor Maximo</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-sumar-valores">Suma de Valores</button></td>
                <td colspan="5"><button id="btn-producto-vector">Producto de Valores</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-calcular-moda">Calcular Moda</button></td>
                <td colspan="5"><button id="btn-calcular-media">Calcular Media</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-calcular-mediana">Calcular Mediana</button></td>
                <td colspan="5"><button id="btn-buscar" style="background-color: aqua;">Buscar Elemento</button></td>
            </tr>

            <tr>
                <td colspan="5"><button id="btn-ordenar-asc-seleccion">Ordenar ASC M√©todo Selecci√≥n</button></td>
                <td colspan="5"><button id="btn-ordenar-desc-seleccion">Ordenar DESC M√©todo Selecci√≥n</button></td>
            </tr>

            <tr>
                <td colspan="5"><button id="btn-ordenar-asc-burbuja">Ordenar ASC M√©todo Burbuja</button></td>
                <td colspan="5"><button id="btn-ordenar-desc-burbuja">Ordenar DESC M√©todo Burbuja</button></td>
            </tr>
        </tfoot>
    </table>
    <hr>
    <table id="tabla-resultado-operaciones" style="display: none;">
        <thead>
            <tr>
                <td colspan="2">Calculos con vectores </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Resultado:</td>
                <td colspan="2"><input type="text" id="id-txt-respuesta"></td>
            </tr>
        </tbody>
    </table>
    <table  id="tabla-vector-ordenado" border="1" cellspacing="1" cellpadding="1" style="display: none;">
        <thead>
            <tr>
                <td colspan="10">ORDENAMIENTO DEL VECTOR NUMERICO</td>
            </tr>
            <tr>
                <td colspan="10" id="descrip-orden-vector"></td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
    </table>    
    <table id="tabla-proceso-busqueda" style="display: none;">
        <thead>
            <tr>
                <td colspan="2">Busqueda con vectores </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Dato a buscar:</td>
                <td colspan="2"><input type="text" id="id-txt-datobuscar"></td>
            </tr>
            <tr>
                <td colspan="2"><button id="btn-busqueda-binaria" style="background-color: chartreuse;">Busqueda Binaria</button></td>
                <td colspan="2"><button id="btn-busqueda-secuencial" style="background-color: darkgoldenrod;">Busqueda Secuencial</button></td>
            </tr>            
            <tr>
                <td>Posici√≥n:</td>
                <td colspan="2"><input type="text" id="id-txt-posicion"></td>
            </tr>
        </tbody>
    </table>    

    <script>
        let vector = []
        let vectorOrdenado = []
        const NUM_MAXIMO_RANDOM = 50

        const tableTbody = document.querySelector('#id-table-vector-numerico > tbody')
        const tableTbodyOrden = document.querySelector('#tabla-vector-ordenado > tbody')
        const btnCargarVector = document.getElementById("btn-cargar-vector")
        const btnVaciarVector = document.getElementById("btn-vaciar-vector")
        const btnValorMinimo = document.getElementById("btn-valor-minimo")
        const btnValorMaximo = document.getElementById("btn-valor-maximo")
        const btnSumarValores = document.getElementById("btn-sumar-valores")
        const btnProductoValores = document.getElementById("btn-producto-vector")
        const btnCalcularModa = document.getElementById("btn-calcular-moda")
        const btnCalcularMedia = document.getElementById("btn-calcular-media")
        const btnCalcularMediana = document.getElementById("btn-calcular-mediana")
        const txtRespuesta = document.getElementById("id-txt-respuesta")
        const btnOrdenAscSeleccion = document.getElementById("btn-ordenar-asc-seleccion")
        const btnOrdenDescSeleccion = document.getElementById("btn-ordenar-desc-seleccion")
        const btnOrdenAscBurbuja = document.getElementById("btn-ordenar-asc-burbuja")
        const btnOrdenDescBurbuja = document.getElementById("btn-ordenar-desc-burbuja")
        const btnBusqueda = document.getElementById("btn-buscar")
        const btnBusquedaBinaria = document.getElementById("btn-busqueda-binaria")
        const btnBusquedaSecuencial = document.getElementById("btn-busqueda-secuencial")
        const txtPosicion = document.getElementById("id-txt-posicion")
        const txtDatoBuscar = document.getElementById("id-txt-datobuscar").value
        const selectDimension = document.getElementById("select-dimension-arreglo")
        let TOPE = parseInt(selectDimension.options[selectDimension.selectedIndex].value)

        selectDimension.addEventListener('change', (event) => {
            TOPE = parseInt(event.target.value)
            //console.log(event.target.value); // üëâÔ∏è get selected VALUE

            // üëáÔ∏è get selected VALUE even outside event handler
            // console.log(selectDimension.options[selectDimension.selectedIndex].value);

            // üëáÔ∏è get selected TEXT in or outside event handler
            // console.log(selectDimension.options[selectDimension.selectedIndex].text);
        })

        //txtDatoBuscar.addEventListener('change', (event) => {
        //    document.getElementById("id-txt-posicion").value = ""
        //})

        btnCargarVector.addEventListener('click', (event) => {
            event.preventDefault()
            txtRespuesta.value = ""
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            fnCargarVector()
            fnPresentarVector()
        })

        btnVaciarVector.addEventListener('click', (event) => {
            event.preventDefault()
            fnVaciarVector()
            fnPresentarVector()
        })

        // Calcular Valor Minomo
        btnValorMinimo.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            let copiaVector = [...vector]
            txtRespuesta.value = fnBuscarNumeroMenor(copiaVector)
        })

        // Calcular Valor M√°ximo
        btnValorMaximo.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            let copiaVector = [...vector]
            txtRespuesta.value = fnBuscarNumeroMayor(copiaVector)
        })

        //Calcular la Suma de Array de n√∫meros
        btnSumarValores.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            txtRespuesta.value = fnSumarValores()
        })

        // Calcular el Producto de Array de n√∫meros
        btnProductoValores.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            txtRespuesta.value = fnProductoVectores()
        })

        // Calcular Moda del Array de n√∫meros
        btnCalcularModa.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            let copiaVector = [...vector]
            txtRespuesta.value = fnCalcularModa(copiaVector)
        })
        
        // Calcular Media del un Array de numeros
        btnCalcularMedia.addEventListener('click', (event) => { 
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            let suma = fnSumarValores()
            let media = suma / TOPE
            txtRespuesta.value = media.toFixed(2)
        })

        // Calcular Mediana en un Array de numeros
        btnCalcularMediana.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "block"
            document.getElementById("tabla-vector-ordenado").style.display = "none"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            let copiaVector = [...vector]
            copiaVector.sort((a, b) => a - b)
            console.log(copiaVector)
            const dimensiones = copiaVector.length

            if (dimensiones % 2 === 0) {
                let posicionCentral = dimensiones / 2
                txtRespuesta.value = (copiaVector[posicionCentral - 1] + copiaVector[posicionCentral]) / 2
            } else {
                let posicionCentral = parseInt((dimensiones - 1) / 2)
                txtRespuesta.value = copiaVector[posicionCentral]
            }

        })

        btnOrdenAscSeleccion.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "block"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            fnOrdenaVectorAscSeleccion()
            fnPresentaVectorOrdenado()
        })

        btnOrdenDescSeleccion.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "block"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            fnOrdenaVectorDescSeleccion()
            fnPresentaVectorOrdenado()
        })
        
        btnOrdenAscBurbuja.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "block"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            fnOrdenaVectorAscBurbuja()
            fnPresentaVectorOrdenado()
        })
        
        btnOrdenDescBurbuja.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "block"
            document.getElementById("tabla-proceso-busqueda").style.display = "none"
            fnOrdenaVectorDescBurbuja()
            fnPresentaVectorOrdenado()
        })

        btnBusqueda.addEventListener('click', (event) => {
            event.preventDefault()
            document.getElementById("tabla-resultado-operaciones").style.display = "none"
            document.getElementById("tabla-vector-ordenado").style.display = "block"
            fnOrdenaVectorAscSeleccion()
            fnPresentaVectorOrdenado()
            document.getElementById("tabla-proceso-busqueda").style.display = "block"
            document.getElementById("id-txt-posicion").value = ""
            document.getElementById("id-txt-datobuscar").value = ""
        })

        btnBusquedaBinaria.addEventListener('click', (event) => {
            event.preventDefault()
            const txtDatoBuscar = document.getElementById("id-txt-datobuscar").value
            if (txtDatoBuscar != "") {
                txtPosicion.value = fnBusquedaBinaria(txtDatoBuscar)
            }
            
        })

        /////////////////////////////////////////////////////////////

        function fnBusquedaBinaria(txtDatoBuscar) {
            let largoVector = vectorOrdenado.length
            let posicion = Math.floor((largoVector) / 2)
            while (posicion > -1) {
                if (vectorOrdenado[posicion] == txtDatoBuscar) {
                    return posicion
                    posicion = -1
                } else if (txtDatoBuscar > vectorOrdenado[posicion]) {
                    posicion = Math.floor((posicion + largoVector) / 2)
                } else {
                    largoVector = posicion
                    posicion = Math.floor(largoVector / 2)
                }
            }
        }
        
        // Cargar valores aleatorios al array
        function fnCargarVector() {
            vector = []
            vectorOrdenado = []
            for (let x = 0; x < TOPE; x++) {
                const numero = Math.ceil(Math.random() * NUM_MAXIMO_RANDOM);
                vector[x] = numero
                vectorOrdenado[x] = numero
             }
        }

        // Borrar los valores del array
        function fnVaciarVector() {
            vector = []
        }

        // Presentar el array en una fila
        function fnPresentarVector() {
            let contador = 0
            let str = ''
            while (contador < 2) {
                str = str + `<tr>`
                for (let x = 0; x < TOPE; x++) {
                    if (contador === 0) {
                        str = str + `<td>${x}</td>`
                    } else {
                        str = str + `<td bgcolor="#00FF00">${vector[x] || '-'}</td>`
                    }
                }
                str = str + `</tr>`
                contador++
            }
            tableTbody.innerHTML = str
        }

        // Presenta vector ordenado
        function fnPresentaVectorOrdenado() {
            let contador = 0
            let str = ''
            while (contador < 2) {
                str = str + `<tr>`
                for (let x = 0; x < vectorOrdenado.length; x++) {
                    if (contador === 0) {
                        str = str + `<td>${x}</td>`
                    } else {
                        str = str + `<td bgcolor="#00FFFF">${vectorOrdenado[x] || '-'}</td>`
                    }
                }
                str = str + `</tr>`
                contador++
            }
            tableTbodyOrden.innerHTML = str
        }

        // Retoernar la suma del array
        function fnSumarValores() {
            let suma = 0
            for (let i = 0; i < TOPE; i++) {
                suma = suma + vector[i]
            }
            return suma
        }

        // Retornar el producto del array
        function fnProductoVectores() {
            let producto = 1
            for (let i = 0; i < TOPE; i++) {
                producto = producto * vector[i]
            }
            return producto
        }

        // RETORNAR VALOR MAXIMO
        function fnBuscarNumeroMayor(copiaVector) {
            let numeroMayor = copiaVector[0]
            for (let i = 1; i < copiaVector.length; i++) {
                if (copiaVector[i] > numeroMayor) {
                    numeroMayor = copiaVector[i]
                }
            }
            return numeroMayor
        }

        // RETORNAR VALOR MINIMO
        function fnBuscarNumeroMenor(copiaVector) {
            let numeroMenor = copiaVector[0]
            for (let i = 1; i < copiaVector.length; i++) {
                if (copiaVector[i] < numeroMenor) {
                    numeroMenor = copiaVector[i]
                }
            }
            return numeroMenor
        }

        //////////////////////////////////////////////////////
        //      Calcular Moda en un Array de n√∫meros        //
        //////////////////////////////////////////////////////
        function fnCalcularModa(copiaVector) {
            let frecuencias = []
            for (let i in copiaVector) {
                const numero = copiaVector[i]
                frecuencias[i] = calcularFrecuencia(numero, copiaVector)
            }
            const posicionModa = obtenerPosicionFrecuenciaMayor(frecuencias)
            if (posicionModa == "") {
                const moda = "La moda no existe"
            } else {
                const moda = copiaVector[posicionModa]
            }
            return moda
        }

                // Retornar a fnCalcularModa() el n√∫mero de veces que un valor se repite en el array copiaVector
                function calcularFrecuencia(numero, copiaVector) {
                    let numVeces = 0
                    for (let i in copiaVector) {
                        if (copiaVector[i] === numero) {
                            numVeces++
                        }
                    }
                    return numVeces
                }

                // Retornar la posici√≥n del mayor valor en el array frecuencias
                function obtenerPosicionFrecuenciaMayor(frecuencias) {
                let posMayor = 0
                let numMayor = frecuencias[0]
                for (let i in frecuencias) {
                    if (frecuencias[i] > numMayor) {
                        numMayor = frecuencias[i]
                        posMayor = i
                    }
                }
                if (numMayor == 1) {
                    posMayor = ""
                }
                return posMayor
            }
        ////////////////////////////////////////////////////////

        function fnOrdenaVectorAscSeleccion() {
            let nuevoVector = [...vector]
            document.getElementById("descrip-orden-vector").innerHTML = "Ascendente, M√©todo Selecci√≥n"
            for (let i = 0; i <= nuevoVector.length-2; i++) {
                let valor = nuevoVector[i]
                let x = i
                for (let j = i + 1; j <= nuevoVector.length-1; j++) {
                    if (valor > nuevoVector[j]) {
                        valor = nuevoVector[j]
                        x = j
                    }
                }
                nuevoVector[x] = nuevoVector[i]
                nuevoVector[i] = valor
            }
            vectorOrdenado = [...nuevoVector]
        }  

        function fnOrdenaVectorDescSeleccion() {
            let nuevoVector = [...vector]
            document.getElementById("descrip-orden-vector").innerHTML = "Descendente, M√©todo Selecci√≥n"
            for (let i = 0; i <= nuevoVector.length-2; i++) {
                let valor = nuevoVector[i]
                let x = i
                for (let j = i + 1; j <= nuevoVector.length-1; j++) {
                    if (valor < nuevoVector[j]) {
                        valor = nuevoVector[j]
                        x = j
                    }
                }
                nuevoVector[x] = nuevoVector[i]
                nuevoVector[i] = valor
            }
            vectorOrdenado = [...nuevoVector]
        }
        
        function fnOrdenaVectorAscBurbuja() {
            let nuevoVector = [...vector]
            document.getElementById("descrip-orden-vector").innerHTML = "Ascendente, M√©todo Burbuja"
            for (let i = 0; i <= nuevoVector.length-1; i++) {
                for (let j = 0; j <= nuevoVector.length-1; j++) {
                    if (nuevoVector[j] > nuevoVector[j+1]) {
                        let pivot = nuevoVector[j]
                        nuevoVector[j] = nuevoVector[j+1]
                        nuevoVector[j+1] = pivot
                    }
                }
            }
            vectorOrdenado = [...nuevoVector]
        }

        function fnOrdenaVectorDescBurbuja() {
            let nuevoVector = [...vector]
            document.getElementById("descrip-orden-vector").innerHTML = "Descendente, M√©todo Burbuja"
            for (let i = 0; i <= nuevoVector.length-1; i++) {
                for (let j = 0; j <= nuevoVector.length-1; j++) {
                    if (nuevoVector[j] < nuevoVector[j+1]) {
                        let pivot = nuevoVector[j]
                        nuevoVector[j] = nuevoVector[j+1]
                        nuevoVector[j+1] = pivot
                    }
                }
            }
            vectorOrdenado = [...nuevoVector]
        }

    </script>
</body>

</html>
